# ========================================
# PlebisHub Docker Compose - Development
# ========================================
# Extends base docker-compose.yml with development-specific config
# Usage: docker compose -f docker-compose.yml -f docker-compose.dev.yml up
# ========================================

version: '3.9'

services:
  app:
    build:
      target: base
    environment:
      RAILS_ENV: development
      RACK_ENV: development
    volumes:
      - .:/app
      - bundle_cache:/usr/local/bundle
      - node_modules:/app/node_modules
    command: bundle exec rails server -b 0.0.0.0 -p 3000

  worker:
    environment:
      RAILS_ENV: development
      RACK_ENV: development
    volumes:
      - .:/app
      - bundle_cache:/usr/local/bundle

  frontend:
    profiles: []  # Remove profile to always start in dev

volumes:
  bundle_cache:
  node_modules:
